# coding: utf-8

"""
    Bandwidth

    Bandwidth's Communication APIs

    The version of the OpenAPI document: 1.0.0
    Contact: letstalk@bandwidth.com
    Generated by OpenAPI Generator (https://openapi-generator.tech)

    Do not edit the class manually.
"""  # noqa: E501


import unittest
from datetime import datetime

from hamcrest import *
from test.utils.env_variables import *
from bandwidth import ApiClient, Configuration
from bandwidth.api.endpoints_api import EndpointsApi
from bandwidth.models.create_web_rtc_connection_request import CreateWebRtcConnectionRequest
from bandwidth.models.create_endpoint_response import CreateEndpointResponse
from bandwidth.models.endpoint_response import EndpointResponse
from bandwidth.models.list_endpoints_response import ListEndpointsResponse
from bandwidth.models.endpoint_type_enum import EndpointTypeEnum
from bandwidth.models.endpoint_direction_enum import EndpointDirectionEnum
from bandwidth.models.endpoint_status_enum import EndpointStatusEnum


class TestEndpointsApi(unittest.TestCase):
    """EndpointsApi unit test stubs"""

    @classmethod
    def setUpClass(cls) -> None:
        configuration = Configuration(
            client_id=BW_CLIENT_ID,
            client_secret=BW_CLIENT_SECRET,
            host='http://127.0.0.1:4010',
            ignore_operation_servers=True
        )
        api_client = ApiClient(configuration)
        cls.endpoints_api_instance = EndpointsApi(api_client)

    def test_create_endpoint(self) -> None:
        """Test case for create_endpoint

        Create Endpoint
        """
        endpoint_body = CreateWebRtcConnectionRequest(
            type=EndpointTypeEnum("webrtc"),
            direction=EndpointDirectionEnum("inbound"),
            event_callback_url="https://myServer.com/bandwidth/webhooks/endpoint",
            event_fallback_url="https://myFallbackServer.com/bandwidth/webhooks/endpoint",
            tag="test-endpoint",
            connection_metadata={
                "key1": "value1",
                "key2": "value2"
            }
        )
        response = self.endpoints_api_instance.create_endpoint_with_http_info(
            BW_ACCOUNT_ID,
            endpoint_body
        )

        assert_that(response.status_code, equal_to(201))
        assert_that(response.data, instance_of(CreateEndpointResponse))
        assert_that(response.data.links, instance_of(list))
        assert_that(response.data.data, instance_of(object))
        assert_that(response.data.errors, instance_of(list))

    def test_delete_endpoint(self) -> None:
        """Test case for delete_endpoint

        Delete Endpoint
        """
        response = self.endpoints_api_instance.delete_endpoint_with_http_info(
            BW_ACCOUNT_ID,
            "ep-abc123"
        )

        assert_that(response.status_code, equal_to(204))

    def test_get_endpoint(self) -> None:
        """Test case for get_endpoint

        Get Endpoint
        """
        response = self.endpoints_api_instance.get_endpoint_with_http_info(
            BW_ACCOUNT_ID,
            "ep-abc123"
        )

        assert_that(response.status_code, equal_to(200))
        assert_that(response.data, instance_of(EndpointResponse))
        assert_that(response.data.links, instance_of(list))
        assert_that(response.data.data, instance_of(object))
        assert_that(response.data.errors, instance_of(list))

    def test_list_endpoints(self) -> None:
        """Test case for list_endpoints

        List Endpoints
        """
        response = self.endpoints_api_instance.list_endpoints_with_http_info(
            BW_ACCOUNT_ID
        )

        assert_that(response.status_code, equal_to(200))
        assert_that(response.data, instance_of(ListEndpointsResponse))
        assert_that(response.data.links, instance_of(list))
        assert_that(response.data.data, instance_of(list))
        assert_that(response.data.errors, instance_of(list))

    def test_list_endpoints_with_filters(self) -> None:
        """Test case for list_endpoints with filters

        List Endpoints with Type and Status Filters
        """
        response = self.endpoints_api_instance.list_endpoints_with_http_info(
            BW_ACCOUNT_ID,
            type=EndpointTypeEnum("webrtc"),
            status=EndpointStatusEnum("active"),
            limit=100
        )

        assert_that(response.status_code, equal_to(200))
        assert_that(response.data, instance_of(ListEndpointsResponse))
        assert_that(response.data.links, instance_of(list))
        assert_that(response.data.data, instance_of(list))
        assert_that(response.data.errors, instance_of(list))
        if response.data.page:
            assert_that(response.data.page, instance_of(object))

    def test_list_endpoints_with_pagination(self) -> None:
        """Test case for list_endpoints with pagination

        List Endpoints with Pagination
        """
        response = self.endpoints_api_instance.list_endpoints_with_http_info(
            BW_ACCOUNT_ID,
            after_cursor="cursor-abc123",
            limit=50
        )

        assert_that(response.status_code, equal_to(200))
        assert_that(response.data, instance_of(ListEndpointsResponse))
        assert_that(response.data.links, instance_of(list))
        assert_that(response.data.data, instance_of(list))
        assert_that(response.data.errors, instance_of(list))

    def test_update_endpoint_bxml(self) -> None:
        """Test case for update_endpoint_bxml

        Update Endpoint BXML
        """
        update_bxml = '<?xml version="1.0" encoding="UTF-8"?><Bxml><SpeakSentence locale="en_US" gender="female" voice="susan">This is a test bxml response for endpoint</SpeakSentence><Pause duration="3"/></Bxml>'

        response = self.endpoints_api_instance.update_endpoint_bxml_with_http_info(
            BW_ACCOUNT_ID,
            "ep-abc123",
            update_bxml
        )

        assert_that(response.status_code, equal_to(204))

    def test_create_endpoint_minimal(self) -> None:
        """Test case for create_endpoint with minimal required fields

        Create Endpoint with Minimal Fields
        """
        endpoint_body = CreateWebRtcConnectionRequest(
            type=EndpointTypeEnum("webrtc"),
            direction=EndpointDirectionEnum("outbound")
        )
        response = self.endpoints_api_instance.create_endpoint_with_http_info(
            BW_ACCOUNT_ID,
            endpoint_body
        )

        assert_that(response.status_code, equal_to(201))
        assert_that(response.data, instance_of(CreateEndpointResponse))

    def test_create_endpoint_sip(self) -> None:
        """Test case for create_endpoint with SIP type

        Create SIP Endpoint
        """
        endpoint_body = CreateWebRtcConnectionRequest(
            type=EndpointTypeEnum("sip"),
            direction=EndpointDirectionEnum("bidirectional"),
            event_callback_url="https://myServer.com/bandwidth/webhooks/sip-endpoint",
            tag="sip-test-endpoint"
        )
        response = self.endpoints_api_instance.create_endpoint_with_http_info(
            BW_ACCOUNT_ID,
            endpoint_body
        )

        assert_that(response.status_code, equal_to(201))
        assert_that(response.data, instance_of(CreateEndpointResponse))


if __name__ == '__main__':
    unittest.main()
